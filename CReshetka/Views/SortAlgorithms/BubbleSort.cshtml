@{
    ViewData["Title"] = "Сортировка пузырьком (Bubble Sort)";
}
<h1>@ViewData["Title"]</h1>

<div class="container">
    <p>
        Один из наиболее известных и часто спрашиваемых на собеседованиях алгоритмов сортировки. Работает за квадратичное время <span>O(n*n)</span>.
    </p>
    <p>
        Принцип работы достаточно прост: последовательно сравниваются два рядом стоящих элемента, и если левый больше правого, то они меняются местами, после чего сравниваются следующие элементы. И так повторяется до тех пор, пока все элементы не будут упорядочены.
    </p>

    <p>
        <h3><span>Пример сортировки пузырьком на C#:</span></h3>
    </p>
    @* упростить код не забудь!*@
<pre>
<code> 
using System;

class BubbleSort
{
    static void Main()
    {
        int[] array = { 64, 34, 25, 12, 22, 11, 90 };

        Console.WriteLine("Исходный массив:");
        PrintArray(array);

        BubbleSortAlgorithm(array);

        Console.WriteLine("\nОтсортированный массив:");
        PrintArray(array);
    }

    static void BubbleSortAlgorithm(int[] arr)
    {
        int n = arr.Length;
        for (int i = 0; i < n - 1; i++)
        {
            for (int j = 0; j < n - i - 1; j++)
            {
                if (arr[j] > arr[j + 1])
                {
                    // Обмен элементов, если они находятся в неправильном порядке
                    int temp = arr[j];
                    arr[j] = arr[j + 1];
                    arr[j + 1] = temp;
                }
            }
        }
    }

    static void PrintArray(int[] arr)
    {
        foreach (var item in arr)
        {
            Console.Write(item + " ");
        }
        Console.WriteLine();
    }
}    </code>
</pre>

    <p>
        <h3><span>Визуализация сортировки:</span></h3>
    </p>

    <div style="align-content:center">
        <iframe width="1280" height="720" src="https://www.youtube.com/embed/Cq7SMsQBEUw" title="Bubble Sort" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
    </div>

    <p>
        <h3><span>Объяснение от <a href="https://www.youtube.com/CODEBLOG">CODE BLOG</a>:</span></h3>
    </p>
    <div style="align-content:center">
        <iframe width="1280" height="720" src="https://www.youtube.com/embed/PD1Nn4fHcts?list=PLIIXgDT0bKw4n6pwBjymd3wCPyQ3_SLMo" title="Сортировка пузырьком (bubble sort) - Алгоритмы C#" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
    </div>

    <p>
        <h3><span>Тест</span></h3>
    </p>
    <form method="post" action="/SortAlgorithms/BubbleSort">
        <fieldset class="form-group">
            <div class="question">
                <legend class="mt-4">Какое квадратичное время у сортировки пузырьком?</legend>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="question1" id="optionsRadios1">
                    <label class="form-check-label" for="optionsRadios1">
                        O(1)
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="question1" id="optionsRadios2">
                    <label class="form-check-label" for="optionsRadios2">
                        O(log n)
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="question1" id="optionsRadios3">
                    <label class="form-check-label" for="optionsRadios3">
                        O(n)
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="question1" id="optionsRadios4">
                    <label class="form-check-label" for="optionsRadios4">
                        O(n log n)
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="question1" id="optionsRadios5" value="correct">
                    <label class="form-check-label" for="optionsRadios5">
                        O(n^2)
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="question1" id="optionsRadios6">
                    <label class="form-check-label" for="optionsRadios6">
                        O(n^3)
                    </label>
                </div>
            </div>

            <div class="question">
                <legend class="mt-4">Какое квадратичное время у сортировки пузырьком?</legend>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="question2" id="optionsRadios1">
                    <label class="form-check-label" for="optionsRadios1">
                        O(1)
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="question2" id="optionsRadios2">
                    <label class="form-check-label" for="optionsRadios2">
                        O(log n)
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="question2" id="optionsRadios3">
                    <label class="form-check-label" for="optionsRadios3">
                        O(n)
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="question2" id="optionsRadios4">
                    <label class="form-check-label" for="optionsRadios4">
                        O(n log n)
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="question2" id="optionsRadios5" value="correct">
                    <label class="form-check-label" for="optionsRadios5">
                        O(n^2)
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="question2" id="optionsRadios6">
                    <label class="form-check-label" for="optionsRadios6">
                        O(n^3)
                    </label>
                </div>
            </div>
            <input type="hidden" id="resultTest" name="resultTest" value="false">
            <button type="submit" class="btn btn-primary" onclick="calculateResults()">Проверить результат</button>
            <div id="results"></div>
        </fieldset>
    </form>
</div>


<script>
    function calculateResults() {
        // Инициализация счетчиков
        var totalQuestions = 0;
        var correctAnswers = 0;
        var resultTest;
        // Получение всех элементов с классом "question"
        var questions = document.getElementsByClassName("question");
        // Перебор всех вопросов
        for (var i = 0; i < questions.length; i++) {
            var question = questions[i];
            // Получение ответа пользователя
            var userAnswer = question.querySelector("input:checked");
            // Получение правильного ответа
            var correctAnswer = question.querySelector("input[value=\"correct\"]");
            // Проверка, выбран ли ответ пользователем
            if (userAnswer !== null) {
                totalQuestions++;
                // Проверка выбранного ответа на правильность
                if (userAnswer === correctAnswer) {
                    correctAnswers++;
                }
            }
        }

        if (totalQuestions === correctAnswers) {
            resultTest = true;
        } else {
            resultTest = false;
        }

        // Установка значения resultTest в скрытое поле формы
        document.getElementById("resultTest").value = resultTest;

        // Вывод результатов
        var resultsMessage = "Вы ответили правильно на " + correctAnswers + " из " + totalQuestions + " вопросов.";
        document.getElementById("results").innerHTML = resultsMessage;
    }
</script>

